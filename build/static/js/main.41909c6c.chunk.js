(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{111:function(e,t,a){e.exports=a(181)},179:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(3),c=a.n(l),i=a(10),p=a(11),o=a(14),s=a(12),u=a(15),h=a(186),d=a(75),m=a(13),y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){var e=a.props,t=e.fire,r=e.row,n=e.col;t(e.playerIndex,r,n)},a}return Object(u.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cell,a=e.step;return"label"===t.status?n.a.createElement("div",{className:"label"},"`"===t.label?"":t.label):"battle"===a?"S"===t.status||"C"===t.status?n.a.createElement("div",{className:"cell",onClick:this.handleClick},""):"O"===t.status||"X"===t.status?n.a.createElement("div",{className:"cell"},t.status):n.a.createElement("div",{className:"cell",onClick:this.handleClick},t.status):n.a.createElement("div",{className:"cell"},t.status)}}]),t}(n.a.Component),f=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.playerIndex,r=t.player,l=t.game,c=t.step,i=1===a?r.player1.grid:r.player2.grid,p="repeat("+(l.boardSize+1)+", 1fr)";return n.a.createElement("div",{className:"board",style:{gridTemplateColumns:p,gridTemplateRows:p}},i.map((function(t,r){return t.map((function(t,l){return n.a.createElement(y,{key:"".concat(r).concat(l),cell:t,step:c,row:r,col:l,playerIndex:a,fire:e.props.fire})}))})))}}]),t}(n.a.Component),b=Object(m.b)((function(e){return{game:e.game,player:e.player}}),null)(f),g=a(109),v=a(184),E=a(187),P=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(n)))).state={direction:"v",input:""},a.onChange=function(e){a.setState({direction:e.target.value})},a.onInputChange=function(e){a.setState({input:e.target.value})},a.inputValidate=function(){var e=a.props.boardSize,t=a.state.input;return console.log(t.slice(1)),t[0].toLowerCase().charCodeAt(0)-96<=e&&t.slice(1)<=e},a.overLapCheck=function(){var e=a.state,t=e.input,r=e.direction,n=a.props,l=n.ships,c=n.shipPlaced,i=n.grid,p=t[0].toLowerCase().charCodeAt(0)-96,o=parseInt(t.slice(1)),s=l[c.length],u=!1;if("v"===r)if(o+s.size<=11)for(var h=0;h<s.size;h++)""!==i[o+h][p].status&&(u=!0);else u=!0;else if(p+s.size<=11)for(var d=0;d<s.size;d++)""!==i[o][p+d].status&&(u=!0);else u=!0;return u},a.onPlace=function(){var e=a.state,t=e.input,r=e.direction,n=a.props,l=n.ships,c=n.playerIndex,i=n.shipPlaced,p=n.updatePlacedShip,o=t[0].toLowerCase().charCodeAt(0)-96,s=parseInt(t.slice(1)),u=l[i.length];if(a.inputValidate()&&!a.overLapCheck()){if("v"===r)for(var h=0;h<u.size;h++)a.props.placeShip(c,[o,s+h],u.type);else for(var d=0;d<u.size;d++)a.props.placeShip(c,[o+d,s],u.type);p(c,u.name)}a.setState({input:""})},a}return Object(u.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.playerIndex;return n.a.createElement("div",null,n.a.createElement("div",{className:"boardContainer"},n.a.createElement(b,{playerIndex:e,step:"preGame"})),n.a.createElement("div",{className:"userInputArea"},n.a.createElement("p",null,this.props.ships.length===this.props.shipPlaced.length?"All Placed":"Now placing : "+this.props.ships[this.props.shipPlaced.length].name),n.a.createElement(g.a,{trigger:["focus"],title:"Enter a combination of letter and number in order to place the ship",placement:"bottomLeft"},n.a.createElement(v.a,{size:"small",maxLength:3,onChange:this.onInputChange,placeholder:"e.g. A1 ",value:this.state.input,style:{width:"100px"}})),n.a.createElement(E.a.Group,{onChange:this.onChange,value:this.state.direction},n.a.createElement(E.a,{value:"v"},"Vertical"),n.a.createElement(E.a,{value:"h"},"Horizontal")),n.a.createElement(d.a,{onClick:this.onPlace,disabled:this.props.ships.length===this.props.shipPlaced.length},"Place")))}}]),t}(n.a.Component),O=Object(m.b)((function(e,t){return{boardSize:e.game.boardSize,ships:e.game.ships,player:e.player,grid:1===t.playerIndex?e.player.player1.grid:e.player.player2.grid,shipPlaced:1===t.playerIndex?e.player.player1.shipPlaced:e.player.player2.shipPlaced}}),(function(e){return{placeShip:function(t,a,r){return e(function(e,t,a){return{type:"PLACE_SHIP",player:e,coord:t,shipType:a}}(t,a,r))},updatePlacedShip:function(t,a){return e(function(e,t){return{type:"UPDATE_PLACED_SHIP",player:e,name:t}}(t,a))}}}))(P),j=a(185),C=a(183),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(n)))).handleFire=function(e,t,r){var n=a.props,l=n.turn,c=n.fire,i=n.toggleTurn;e!==l+1?j.a.warning("It's not your turn yet!"):(c(e,t,r),i())},a}return Object(u.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var r=this.props,n=r.toBeHitP1,l=r.toBeHitP2;0===n.length?j.a.success("Player 2 won!"):0===l.length&&j.a.success("Player 1 won!")}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h2",{align:"center"},"It's turn for Player"+(!this.props.turn+1)),n.a.createElement("div",{className:"boardContainer"},n.a.createElement("div",{className:"board-pop-container"},n.a.createElement("h3",{align:"center"},"Player1"),n.a.createElement(b,{playerIndex:1,step:"battle",style:{margin:"40px 40px"},fire:this.handleFire}),n.a.createElement(C.a,{content:n.a.createElement(b,{playerIndex:1,step:"preGame"}),placement:"bottomLeft"},n.a.createElement(d.a,{type:"primary"},"Hover to show Player1's ship map"))),n.a.createElement("div",{className:"board-pop-container"},n.a.createElement("h3",{align:"center"},"Player2"),n.a.createElement(b,{playerIndex:2,step:"battle",style:{margin:"40px 40px"},fire:this.handleFire}),n.a.createElement(C.a,{content:n.a.createElement(b,{playerIndex:2,step:"preGame"}),placement:"bottomRight"},n.a.createElement(d.a,{type:"primary"},"Hover to show Player2's ship map")),",")))}}]),t}(n.a.Component),I=Object(m.b)((function(e){return{turn:e.game.turn,toBeHitP1:e.player.player1.shipPlacement,toBeHitP2:e.player.player2.shipPlacement}}),(function(e){return{fire:function(t,a,r){return e(function(e,t,a){return{type:"FIRE",player:e,row:t,col:a}}(t,a,r))},toggleTurn:function(){return e({type:"TOGGLE_TURN"})}}}))(w),S=h.a.Step,x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(n)))).state={currentStep:0},a.next=function(){a.setState((function(e){return{currentStep:e.currentStep+1}}))},a.restart=function(){a.setState({currentStep:0}),a.props.initGrid(a.props.boardSize+1)},a}return Object(u.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.currentStep,a=[{title:"Player 1 preparation",content:n.a.createElement(O,{playerIndex:1})},{title:"Player2 preparation",content:n.a.createElement(O,{playerIndex:2})},{title:"Battle",content:n.a.createElement(I,null)}];return n.a.createElement("div",null,n.a.createElement(h.a,{current:t,labelPlacement:"vertical"},a.map((function(e){return n.a.createElement(S,{key:e.title,title:e.title})}))),n.a.createElement("div",null,a[t].content),n.a.createElement("div",{className:"steps-action"},t<2&&n.a.createElement(d.a,{type:"primary",onClick:function(){return e.next()}},"Next Step"),2===t&&n.a.createElement(d.a,{type:"primary",onClick:function(){return e.restart()}},"Restart Game")))}}]),t}(n.a.Component),k=Object(m.b)((function(e){return{boardSize:e.game.boardSize}}),(function(e){return{initGrid:function(t){return e(function(e){return{type:"INIT_GRID",size:e}}(t))}}}))(x);a(178),a(179);var z=function(){return n.a.createElement("div",null,n.a.createElement("h1",{align:"center"},"Battleship"),n.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=a(28),T={win:!1,turn:1,boardSize:10,ships:[{name:"Submarine",type:"S",size:3},{name:"Cruiser",type:"C",size:3}]},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_TURN":return Object.assign({},e,{turn:!e.turn});default:return e}},L=a(7),G=a(74),H=a.n(G),_=function(e){return String.fromCharCode(96+e).toUpperCase()};function R(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11,t=[],a=0;a<e;a++){for(var r=[],n=0;n<e;n++)0===a?r.push({status:"label",label:_(n)}):0!==a&&0===n?r.push({status:"label",label:a}):r.push({status:""});t.push(r)}return t}var B={player1:{grid:R(),shipPlacement:[],shipPlaced:[]},player2:{grid:R(),shipPlacement:[],shipPlaced:[]}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_GRID":return Object.assign({},e,{player1:{grid:R(t.size),shipPlacement:[],shipPlaced:[]},player2:{grid:R(t.size),shipPlacement:[],shipPlaced:[]}});case"PLACE_SHIP":return 1===t.player?Object(L.a)({},e,{player1:Object(L.a)({},e.player1,{grid:e.player1.grid.map((function(e,a){return a===t.coord[1]?e.map((function(e,a){return a===t.coord[0]?{status:t.shipType}:e})):e})),shipPlacement:e.player1.shipPlacement.concat({coord:t.coord,status:t.shipType})})}):Object(L.a)({},e,{player2:Object(L.a)({},e.player2,{grid:e.player2.grid.map((function(e,a){return a===t.coord[1]?e.map((function(e,a){return a===t.coord[0]?{status:t.shipType}:e})):e})),shipPlacement:e.player2.shipPlacement.concat({coord:t.coord,status:t.shipType})})});case"FIRE":return 1===t.player?Object(L.a)({},e,{player1:Object(L.a)({},e.player1,{grid:e.player1.grid.map((function(a,r){return r===t.row?a.map((function(a,r){return r===t.col?{status:""!==e.player1.grid[t.row][t.col].status?"O":"X"}:a})):a})),shipPlacement:H.a.reject(e.player1.shipPlacement,{coord:[t.col,t.row]})})}):Object(L.a)({},e,{player2:Object(L.a)({},e.player2,{grid:e.player2.grid.map((function(a,r){return r===t.row?a.map((function(a,r){return r===t.col?{status:""!==e.player2.grid[t.row][t.col].status?"O":"X"}:a})):a})),shipPlacement:H.a.reject(e.player2.shipPlacement,{coord:[t.col,t.row]})})});case"UPDATE_PLACED_SHIP":return 1===t.player?Object(L.a)({},e,{player1:Object(L.a)({},e.player1,{shipPlaced:e.player1.shipPlaced.concat(t.name)})}):Object(L.a)({},e,{player2:Object(L.a)({},e.player2,{shipPlaced:e.player2.shipPlaced.concat(t.name)})});default:return e}},U=Object(N.c)({game:A,player:D}),F=a(106),V=a.n(F),X=a(107),J=Object(N.d)(U,Object(N.a)(X.a,V.a));c.a.render(n.a.createElement(m.a,{store:J},n.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[111,1,2]]]);
//# sourceMappingURL=main.41909c6c.chunk.js.map